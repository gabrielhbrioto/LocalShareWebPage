<!DOCTYPE html>
<html>
<head>
  <title>WebSocket com ESP32</title>
</head>
<body>
  <h1>Configurar comunicação com a ESP32</h1>
  <form action="/connect" method="post" id="connection-form">
    <label for="message">URL de conexão com a ESP32:</label>
    <input type="text" id="ngroknurl" name="ngroknurl">
    <input type="submit" value="Conectar">
  </form>
  <script>
    document.getElementById('connection-form').addEventListener('submit', function(event) {
      event.preventDefault();
      const ngroknurl = document.getElementById('ngroknurl').value;
      const connurl = ngroknurl.replace(/^http/, 'ws') + '/ws';

      // Salva a URL do WebSocket no localStorage
      localStorage.setItem('wsUrl', connurl);

      // Redireciona para a página de login após salvar a URL
      window.location.href = '/login.html';
    });
  </script>
</body>
</html>
